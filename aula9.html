<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
       
        const NotificationType = {
    Success: "Success",
    Warning: "Warning"
}

class System {
    #name;
    #users;

    constructor(name) {
        this.#name = name;
        this.#users = [];
    }

    addUser(user) {
        this.#users.push(user);
    }

    showUsers() {
        this.#users.forEach(user => {
            user.printInfo();
        });
    }

    removeInactiveUsers() {
        const now = new Date();
        this.#users = this.#users.filter(user => {
            const lastActivity = new Date(user.getLastActivity());
            const diffMinutes = (now - lastActivity) / (1000 * 60);
            return diffMinutes <= 1;
        });
    }

    notifyAllUsers(message, messageType) {
        this.#users.forEach(user => {
            user.getNotifications().pushNotification(new Notification(message, messageType, this.#name));
        });
    }
}

class User {
    #id;
    #nome;
    #email;
    #cpf;
    #login;
    #password;
    #notifications;
    #lastActivity;

    constructor(nome, email, cpf, login) {
        this.#nome = nome;
        this.#email = email;
        this.#cpf = cpf;
        this.#login = login;
        this.#notifications = new Notifications();
        this.#lastActivity = new Date().toISOString();
    }

    printInfo() {
        console.log(`Nome: ${this.#nome}, Email: ${this.#email}, CPF: ${this.#cpf}`);
    }

    getLastActivity() {
        return this.#lastActivity;
    }

    updateLastActivity() {
        this.#lastActivity = new Date().toISOString();
    }

    getNotifications() {
        return this.#notifications;
    }
}

class Notifications {
    #notifications;

    constructor() {
        this.#notifications = [];
    }

    pushNotification(notification) {
        this.#notifications.push(notification);
    }

    showNotifications() {
        this.#notifications.forEach(notification => {
            notification.printInfo();
        });
    }
}

class Notification {
    #message;
    #messageType;
    #isRead;
    #notificatedOn;
    #notificatedBy;

    constructor(message, messageType, notificatedBy) {
        this.#message = message;
        this.#messageType = messageType;
        this.#isRead = false;
        this.#notificatedOn = new Date().toISOString();
        this.#notificatedBy = notificatedBy;
    }

    printInfo() {
        console.log(`${this.#messageType}: ${this.#message}`);
    }

    markAsRead() {
        this.#isRead = true;
    }

    isRead() {
        return this.#isRead;
    }
}


const mySystem = new System("My System");

const user1 = new User("Alice", "alice@example.com", "123.456.789-00", "alice123");
const user2 = new User("Bob", "bob@example.com", "987.654.321-00", "bob321");


mySystem.addUser(user1);
mySystem.addUser(user2);

console.log("Informações dos usuários:");
mySystem.showUsers();


mySystem.notifyAllUsers("Bem-vindo ao sistema!", NotificationType.Success);


console.log("Notificações de Alice:");
user1.getNotifications().showNotifications();


setTimeout(() => {
    user1.updateLastActivity();
    mySystem.removeInactiveUsers();
    console.log("\nUsuários após remoção dos inativos:");
    mySystem.showUsers();
}, 62000); 


    </script>
</body>

</html>